{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(getPostDetailSaga),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(getUserPostsSaga),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(votePostSaga),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime.mark(createPostSaga),\n    _marked5 = /*#__PURE__*/_regeneratorRuntime.mark(deletePostSaga),\n    _marked6 = /*#__PURE__*/_regeneratorRuntime.mark(deleteModeratorSaga),\n    _marked7 = /*#__PURE__*/_regeneratorRuntime.mark(Saga);\n\nimport { Get, Post, Delete, PostFormData } from \"../services\";\nimport Router from 'next/router';\nimport { call, put, takeLatest } from \"redux-saga/effects\";\nimport { GET_POST_DETAIL_FAILURE, GET_POST_DETAIL_REQUEST, GET_POST_DETAIL_SUCCESS, GET_USER_POSTS_REQUEST, GET_USER_POSTS_SUCCESS, GET_USER_POSTS_FAILURE, LIKE_POST_REQUEST, LIKE_POST_SUCCESS, LIKE_POST_FAILURE, getPostDetailRequest, CONVERT_LIKE_POST_SUCCESS, CONVERT_LIKE_POST_FAILURE, CONVERT_LIKE_POST_REQUEST, CREATE_POST_SUCCESS, CREATE_POST_FAILURE, CREATE_POST_REQUEST, VOTE_POST_SUCCESS, VOTE_POST_FAILURE, VOTE_POST_REQUEST, DELETE_POST_SUCCESS, DELETE_POST_FAILURE, getUserPostsRequest, DELETE_POST_REQUEST, DELETE_MODERATOR_FAILURE, DELETE_MODERATOR_SUCCESS, DELETE_MODERATOR_REQUEST } from './actions';\nimport { readLocalStorage } from \"../helpers\";\nimport { getHomePostsRequest } from \"../home/actions\";\n/* import { push } from \"react-router-redux\";\r\n */\n\nimport { LOADER_START, LOADER_END } from \"../loader/actions\";\nimport { getCommunityRequest, getCommunityPostsRequest } from \"../community/actions\";\nimport { getProfilePostsRequest } from \"../profile/actions\";\n\nfunction getPostDetailSaga(_ref) {\n  var payload, url, response;\n  return _regeneratorRuntime.wrap(function getPostDetailSaga$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          payload = _ref.payload;\n          _context.prev = 1;\n\n          if (!payload.loaderStart) {\n            _context.next = 5;\n            break;\n          }\n\n          _context.next = 5;\n          return put({\n            type: LOADER_START\n          });\n\n        case 5:\n          url = \"post/get?slug=\".concat(payload.slug);\n          _context.next = 8;\n          return call(Get, url, {}, payload.token, false);\n\n        case 8:\n          response = _context.sent;\n\n          if (!(response && !response.error)) {\n            _context.next = 16;\n            break;\n          }\n\n          _context.next = 12;\n          return put({\n            type: GET_POST_DETAIL_SUCCESS,\n            payload: response\n          });\n\n        case 12:\n          _context.next = 14;\n          return put({\n            type: LOADER_END\n          });\n\n        case 14:\n          _context.next = 20;\n          break;\n\n        case 16:\n          _context.next = 18;\n          return put({\n            type: GET_POST_DETAIL_FAILURE,\n            payload: response\n          });\n\n        case 18:\n          _context.next = 20;\n          return put({\n            type: LOADER_END\n          });\n\n        case 20:\n          _context.next = 28;\n          break;\n\n        case 22:\n          _context.prev = 22;\n          _context.t0 = _context[\"catch\"](1);\n          _context.next = 26;\n          return put({\n            type: GET_POST_DETAIL_FAILURE,\n            payload: _context.t0\n          });\n\n        case 26:\n          _context.next = 28;\n          return put({\n            type: LOADER_END\n          });\n\n        case 28:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[1, 22]]);\n}\n\nfunction getUserPostsSaga(_ref2) {\n  var payload, response;\n  return _regeneratorRuntime.wrap(function getUserPostsSaga$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          payload = _ref2.payload;\n          _context2.prev = 1;\n          _context2.next = 4;\n          return put({\n            type: LOADER_START\n          });\n\n        case 4:\n          _context2.next = 6;\n          return call(Get, \"post/get-user-posts?username=\".concat(payload.username), {}, {}, false);\n\n        case 6:\n          response = _context2.sent;\n\n          if (!(response && !response.error)) {\n            _context2.next = 14;\n            break;\n          }\n\n          _context2.next = 10;\n          return put({\n            type: GET_USER_POSTS_SUCCESS,\n            payload: response\n          });\n\n        case 10:\n          _context2.next = 12;\n          return put({\n            type: LOADER_END\n          });\n\n        case 12:\n          _context2.next = 18;\n          break;\n\n        case 14:\n          _context2.next = 16;\n          return put({\n            type: GET_USER_POSTS_FAILURE,\n            payload: response\n          });\n\n        case 16:\n          _context2.next = 18;\n          return put({\n            type: LOADER_END\n          });\n\n        case 18:\n          _context2.next = 26;\n          break;\n\n        case 20:\n          _context2.prev = 20;\n          _context2.t0 = _context2[\"catch\"](1);\n          _context2.next = 24;\n          return put({\n            type: GET_USER_POSTS_FAILURE,\n            payload: _context2.t0\n          });\n\n        case 24:\n          _context2.next = 26;\n          return put({\n            type: LOADER_END\n          });\n\n        case 26:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, null, [[1, 20]]);\n}\n\nfunction votePostSaga(_ref3) {\n  var payload, votedUsername, user, newPayload, response;\n  return _regeneratorRuntime.wrap(function votePostSaga$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          payload = _ref3.payload;\n          votedUsername = payload.username;\n          _context3.prev = 2;\n          user = readLocalStorage('user');\n          newPayload = {\n            value: payload.value,\n            userId: user.id,\n            postId: payload.postId\n          };\n          _context3.next = 7;\n          return call(Post, \"post/vote\", newPayload, {}, false);\n\n        case 7:\n          response = _context3.sent;\n\n          if (!(response && !response.error)) {\n            _context3.next = 13;\n            break;\n          }\n\n          _context3.next = 11;\n          return put({\n            type: VOTE_POST_SUCCESS,\n            payload: response\n          });\n\n        case 11:\n          _context3.next = 15;\n          break;\n\n        case 13:\n          _context3.next = 15;\n          return put({\n            type: VOTE_POST_FAILURE,\n            payload: response\n          });\n\n        case 15:\n          _context3.next = 21;\n          break;\n\n        case 17:\n          _context3.prev = 17;\n          _context3.t0 = _context3[\"catch\"](2);\n          _context3.next = 21;\n          return put({\n            type: VOTE_POST_FAILURE,\n            payload: _context3.t0\n          });\n\n        case 21:\n          if (!(payload.page == \"community\")) {\n            _context3.next = 28;\n            break;\n          }\n\n          _context3.next = 24;\n          return put(getCommunityPostsRequest({\n            slug: payload.cSlug,\n            isVoted: true,\n            pageNumber: payload.pageNumber,\n            pageSize: payload.pageSize\n          }));\n\n        case 24:\n          _context3.next = 26;\n          return put(getCommunityRequest({\n            slug: payload.cSlug\n          }));\n\n        case 26:\n          _context3.next = 40;\n          break;\n\n        case 28:\n          if (!(payload.page == \"user\")) {\n            _context3.next = 33;\n            break;\n          }\n\n          _context3.next = 31;\n          return put(getUserPostsRequest({\n            username: votedUsername\n          }));\n\n        case 31:\n          _context3.next = 40;\n          break;\n\n        case 33:\n          if (!(payload.page == \"post_detail\")) {\n            _context3.next = 38;\n            break;\n          }\n\n          _context3.next = 36;\n          return put(getPostDetailRequest({\n            search: \"?status=\".concat(payload.postId),\n            loaderStart: false\n          }));\n\n        case 36:\n          _context3.next = 40;\n          break;\n\n        case 38:\n          _context3.next = 40;\n          return put(getHomePostsRequest({\n            loaderStart: false,\n            pageNumber: payload.pageNumber,\n            pageSize: payload.pageSize,\n            isVoted: payload.isVoted\n          }));\n\n        case 40:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, null, [[2, 17]]);\n}\n\nfunction createPostSaga(_ref4) {\n  var payload, user, response;\n  return _regeneratorRuntime.wrap(function createPostSaga$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          payload = _ref4.payload;\n          _context4.prev = 1;\n          _context4.next = 4;\n          return put({\n            type: LOADER_START\n          });\n\n        case 4:\n          user = readLocalStorage('user');\n          _context4.next = 7;\n          return call(PostFormData, \"post/create-post\", payload, {});\n\n        case 7:\n          response = _context4.sent;\n\n          if (!(response && !response.error)) {\n            _context4.next = 17;\n            break;\n          }\n\n          _context4.next = 11;\n          return put({\n            type: CREATE_POST_SUCCESS,\n            payload: response\n          });\n\n        case 11:\n          _context4.next = 13;\n          return put({\n            type: LOADER_END\n          });\n\n        case 13:\n          _context4.next = 15;\n          return call(Router.push(\"/p/\".concat(user.username)));\n\n        case 15:\n          _context4.next = 21;\n          break;\n\n        case 17:\n          _context4.next = 19;\n          return put({\n            type: CREATE_POST_FAILURE,\n            payload: response\n          });\n\n        case 19:\n          _context4.next = 21;\n          return put({\n            type: LOADER_END\n          });\n\n        case 21:\n          _context4.next = 29;\n          break;\n\n        case 23:\n          _context4.prev = 23;\n          _context4.t0 = _context4[\"catch\"](1);\n          _context4.next = 27;\n          return put({\n            type: CREATE_POST_FAILURE,\n            payload: _context4.t0\n          });\n\n        case 27:\n          _context4.next = 29;\n          return put({\n            type: LOADER_END\n          });\n\n        case 29:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4, null, [[1, 23]]);\n}\n\nfunction deletePostSaga(_ref5) {\n  var payload, response;\n  return _regeneratorRuntime.wrap(function deletePostSaga$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          payload = _ref5.payload;\n          _context5.prev = 1;\n          _context5.next = 4;\n          return put({\n            type: LOADER_START\n          });\n\n        case 4:\n          _context5.next = 6;\n          return call(Delete, \"post/delete?id=\".concat(payload.id), {}, {});\n\n        case 6:\n          response = _context5.sent;\n\n          if (!(response && !response.error)) {\n            _context5.next = 14;\n            break;\n          }\n\n          _context5.next = 10;\n          return put({\n            type: DELETE_POST_SUCCESS,\n            payload: response\n          });\n\n        case 10:\n          _context5.next = 12;\n          return put({\n            type: LOADER_END\n          });\n\n        case 12:\n          _context5.next = 18;\n          break;\n\n        case 14:\n          _context5.next = 16;\n          return put({\n            type: DELETE_POST_FAILURE,\n            payload: response\n          });\n\n        case 16:\n          _context5.next = 18;\n          return put({\n            type: LOADER_END\n          });\n\n        case 18:\n          _context5.next = 26;\n          break;\n\n        case 20:\n          _context5.prev = 20;\n          _context5.t0 = _context5[\"catch\"](1);\n          _context5.next = 24;\n          return put({\n            type: DELETE_POST_FAILURE,\n            payload: _context5.t0\n          });\n\n        case 24:\n          _context5.next = 26;\n          return put({\n            type: LOADER_END\n          });\n\n        case 26:\n          _context5.next = 28;\n          return put(getProfilePostsRequest({}));\n\n        case 28:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5, null, [[1, 20]]);\n}\n\nfunction deleteModeratorSaga(_ref6) {\n  var payload, response;\n  return _regeneratorRuntime.wrap(function deleteModeratorSaga$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          payload = _ref6.payload;\n          _context6.prev = 1;\n          _context6.next = 4;\n          return put({\n            type: LOADER_START\n          });\n\n        case 4:\n          _context6.next = 6;\n          return call(Delete, \"/post/moderator-delete\", payload, {}, false);\n\n        case 6:\n          response = _context6.sent;\n\n          if (!(response && !response.error)) {\n            _context6.next = 14;\n            break;\n          }\n\n          _context6.next = 10;\n          return put({\n            type: DELETE_MODERATOR_SUCCESS,\n            payload: _objectSpread(_objectSpread({}, response), {}, {\n              deletedPost: payload.postId\n            })\n          });\n\n        case 10:\n          _context6.next = 12;\n          return put({\n            type: LOADER_END\n          });\n\n        case 12:\n          _context6.next = 18;\n          break;\n\n        case 14:\n          _context6.next = 16;\n          return put({\n            type: DELETE_MODERATOR_FAILURE,\n            payload: response\n          });\n\n        case 16:\n          _context6.next = 18;\n          return put({\n            type: LOADER_END\n          });\n\n        case 18:\n          _context6.next = 26;\n          break;\n\n        case 20:\n          _context6.prev = 20;\n          _context6.t0 = _context6[\"catch\"](1);\n          _context6.next = 24;\n          return put({\n            type: DELETE_MODERATOR_FAILURE,\n            payload: _context6.t0\n          });\n\n        case 24:\n          _context6.next = 26;\n          return put({\n            type: LOADER_END\n          });\n\n        case 26:\n          _context6.next = 28;\n          return put(getCommunityRequest({\n            slug: payload.slug\n          }));\n\n        case 28:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6, null, [[1, 20]]);\n}\n\nexport default function Saga() {\n  return _regeneratorRuntime.wrap(function Saga$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return takeLatest(GET_POST_DETAIL_REQUEST, getPostDetailSaga);\n\n        case 2:\n          _context7.next = 4;\n          return takeLatest(GET_USER_POSTS_REQUEST, getUserPostsSaga);\n\n        case 4:\n          _context7.next = 6;\n          return takeLatest(VOTE_POST_REQUEST, votePostSaga);\n\n        case 6:\n          _context7.next = 8;\n          return takeLatest(CREATE_POST_REQUEST, createPostSaga);\n\n        case 8:\n          _context7.next = 10;\n          return takeLatest(DELETE_POST_REQUEST, deletePostSaga);\n\n        case 10:\n          _context7.next = 12;\n          return takeLatest(DELETE_MODERATOR_REQUEST, deleteModeratorSaga);\n\n        case 12:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, _marked7);\n}\n_c = Saga;\n\nvar _c;\n\n$RefreshReg$(_c, \"Saga\");","map":{"version":3,"sources":["D:/repos/saalla-next.js/lib/posts/sagas.js"],"names":["getPostDetailSaga","getUserPostsSaga","votePostSaga","createPostSaga","deletePostSaga","deleteModeratorSaga","Saga","Get","Post","Delete","PostFormData","Router","call","put","takeLatest","GET_POST_DETAIL_FAILURE","GET_POST_DETAIL_REQUEST","GET_POST_DETAIL_SUCCESS","GET_USER_POSTS_REQUEST","GET_USER_POSTS_SUCCESS","GET_USER_POSTS_FAILURE","LIKE_POST_REQUEST","LIKE_POST_SUCCESS","LIKE_POST_FAILURE","getPostDetailRequest","CONVERT_LIKE_POST_SUCCESS","CONVERT_LIKE_POST_FAILURE","CONVERT_LIKE_POST_REQUEST","CREATE_POST_SUCCESS","CREATE_POST_FAILURE","CREATE_POST_REQUEST","VOTE_POST_SUCCESS","VOTE_POST_FAILURE","VOTE_POST_REQUEST","DELETE_POST_SUCCESS","DELETE_POST_FAILURE","getUserPostsRequest","DELETE_POST_REQUEST","DELETE_MODERATOR_FAILURE","DELETE_MODERATOR_SUCCESS","DELETE_MODERATOR_REQUEST","readLocalStorage","getHomePostsRequest","LOADER_START","LOADER_END","getCommunityRequest","getCommunityPostsRequest","getProfilePostsRequest","payload","loaderStart","type","url","slug","token","response","error","username","votedUsername","user","newPayload","value","userId","id","postId","page","cSlug","isVoted","pageNumber","pageSize","search","push","deletedPost"],"mappings":"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","sourcesContent":["import { Get, Post, Delete, PostFormData } from \"../services\";\r\nimport Router from 'next/router'\r\nimport { call, put, takeLatest } from \"redux-saga/effects\";\r\nimport { GET_POST_DETAIL_FAILURE, GET_POST_DETAIL_REQUEST, GET_POST_DETAIL_SUCCESS, GET_USER_POSTS_REQUEST, GET_USER_POSTS_SUCCESS, GET_USER_POSTS_FAILURE, LIKE_POST_REQUEST, LIKE_POST_SUCCESS, LIKE_POST_FAILURE, getPostDetailRequest, CONVERT_LIKE_POST_SUCCESS, CONVERT_LIKE_POST_FAILURE, CONVERT_LIKE_POST_REQUEST, CREATE_POST_SUCCESS, CREATE_POST_FAILURE, CREATE_POST_REQUEST, VOTE_POST_SUCCESS, VOTE_POST_FAILURE, VOTE_POST_REQUEST, DELETE_POST_SUCCESS, DELETE_POST_FAILURE, getUserPostsRequest, DELETE_POST_REQUEST, DELETE_MODERATOR_FAILURE, DELETE_MODERATOR_SUCCESS, DELETE_MODERATOR_REQUEST } from './actions';\r\nimport { readLocalStorage } from \"../helpers\";\r\nimport { getHomePostsRequest } from \"../home/actions\";\r\n/* import { push } from \"react-router-redux\";\r\n */import { LOADER_START, LOADER_END } from \"../loader/actions\";\r\nimport { getCommunityRequest, getCommunityPostsRequest } from \"../community/actions\";\r\nimport { getProfilePostsRequest } from \"../profile/actions\";\r\n\r\nfunction* getPostDetailSaga({ payload }) {\r\n  try {\r\n    if (payload.loaderStart) {\r\n      yield put({ type: LOADER_START });\r\n\r\n    }\r\n    const url = `post/get?slug=${payload.slug}`;\r\n    const response = yield call(Get, url, {}, payload.token, false);\r\n    if (response && !response.error) {\r\n      yield put({ type: GET_POST_DETAIL_SUCCESS, payload: response });\r\n      yield put({ type: LOADER_END });\r\n    } else {\r\n      yield put({ type: GET_POST_DETAIL_FAILURE, payload: response });\r\n      yield put({ type: LOADER_END });\r\n    }\r\n  } catch (error) {\r\n    yield put({ type: GET_POST_DETAIL_FAILURE, payload: error });\r\n    yield put({ type: LOADER_END });\r\n  }\r\n}\r\n\r\nfunction* getUserPostsSaga({ payload }) {\r\n  try {\r\n    yield put({ type: LOADER_START });\r\n    const response = yield call(Get, `post/get-user-posts?username=${payload.username}`, {}, {}, false);\r\n    if (response && !response.error) {\r\n      yield put({ type: GET_USER_POSTS_SUCCESS, payload: response });\r\n      yield put({ type: LOADER_END });\r\n    } else {\r\n      yield put({ type: GET_USER_POSTS_FAILURE, payload: response });\r\n      yield put({ type: LOADER_END });\r\n    }\r\n  } catch (error) {\r\n    yield put({ type: GET_USER_POSTS_FAILURE, payload: error });\r\n    yield put({ type: LOADER_END });\r\n  }\r\n}\r\n\r\nfunction* votePostSaga({ payload }) {\r\n  const votedUsername = payload.username;\r\n  try {\r\n    const user = readLocalStorage('user')\r\n    const newPayload = { value: payload.value, userId: user.id, postId: payload.postId }\r\n    const response = yield call(Post, `post/vote`, newPayload, {}, false);\r\n    if (response && !response.error) {\r\n      yield put({ type: VOTE_POST_SUCCESS, payload: response });\r\n    } else {\r\n      yield put({ type: VOTE_POST_FAILURE, payload: response });\r\n    }\r\n  } catch (error) {\r\n    yield put({ type: VOTE_POST_FAILURE, payload: error });\r\n  }\r\n  if (payload.page == \"community\") {\r\n    yield put(getCommunityPostsRequest({ slug: payload.cSlug, isVoted: true, pageNumber: payload.pageNumber, pageSize: payload.pageSize, }));\r\n    yield put(getCommunityRequest({ slug: payload.cSlug }))\r\n  } else if (payload.page == \"user\") {\r\n    yield put(getUserPostsRequest({ username: votedUsername }))\r\n  } else if (payload.page == \"post_detail\") {\r\n    yield put(getPostDetailRequest({ search: `?status=${payload.postId}`, loaderStart: false }));\r\n  } else {\r\n    yield put(getHomePostsRequest({ loaderStart: false, pageNumber: payload.pageNumber, pageSize: payload.pageSize, isVoted: payload.isVoted }));\r\n  }\r\n}\r\n\r\nfunction* createPostSaga({ payload }) {\r\n  try {\r\n    yield put({ type: LOADER_START });\r\n    const user = readLocalStorage('user');\r\n    const response = yield call(PostFormData, `post/create-post`, payload, {});\r\n    if (response && !response.error) {\r\n      yield put({ type: CREATE_POST_SUCCESS, payload: response });\r\n      yield put({ type: LOADER_END });\r\n      yield call(Router.push(`/p/${user.username}`))\r\n    } else {\r\n      yield put({ type: CREATE_POST_FAILURE, payload: response });\r\n      yield put({ type: LOADER_END });\r\n    }\r\n  } catch (error) {\r\n    yield put({ type: CREATE_POST_FAILURE, payload: error });\r\n    yield put({ type: LOADER_END });\r\n  }\r\n}\r\n\r\nfunction* deletePostSaga({ payload }) {\r\n  try {\r\n    yield put({ type: LOADER_START });\r\n    const response = yield call(Delete, `post/delete?id=${payload.id}`, {}, {});\r\n    if (response && !response.error) {\r\n      yield put({ type: DELETE_POST_SUCCESS, payload: response });\r\n      yield put({ type: LOADER_END });\r\n    } else {\r\n      yield put({ type: DELETE_POST_FAILURE, payload: response });\r\n      yield put({ type: LOADER_END });\r\n    }\r\n  } catch (error) {\r\n    yield put({ type: DELETE_POST_FAILURE, payload: error });\r\n    yield put({ type: LOADER_END });\r\n  }\r\n  yield put(getProfilePostsRequest({}));\r\n}\r\n\r\nfunction* deleteModeratorSaga({ payload }) {\r\n  try {\r\n    yield put({ type: LOADER_START });\r\n    const response = yield call(Delete, `/post/moderator-delete`, payload, {}, false);\r\n    if (response && !response.error) {\r\n      yield put({ type: DELETE_MODERATOR_SUCCESS, payload: { ...response, deletedPost: payload.postId } });\r\n      yield put({ type: LOADER_END });\r\n    } else {\r\n      yield put({ type: DELETE_MODERATOR_FAILURE, payload: response });\r\n      yield put({ type: LOADER_END });\r\n    }\r\n  } catch (error) {\r\n    yield put({ type: DELETE_MODERATOR_FAILURE, payload: error });\r\n    yield put({ type: LOADER_END });\r\n  }\r\n  yield put(getCommunityRequest({ slug: payload.slug }));\r\n  //yield put(getCommunityPostsRequest({ slug: payload.slug, pageNumber: payload.pageNumber, pageSize: payload.pageSize, }));\r\n}\r\n\r\nexport default function* Saga() {\r\n  yield takeLatest(GET_POST_DETAIL_REQUEST, getPostDetailSaga);\r\n  yield takeLatest(GET_USER_POSTS_REQUEST, getUserPostsSaga);\r\n  yield takeLatest(VOTE_POST_REQUEST, votePostSaga);\r\n  yield takeLatest(CREATE_POST_REQUEST, createPostSaga);\r\n  yield takeLatest(DELETE_POST_REQUEST, deletePostSaga);\r\n  yield takeLatest(DELETE_MODERATOR_REQUEST, deleteModeratorSaga);\r\n}"]},"metadata":{},"sourceType":"module"}