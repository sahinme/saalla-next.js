{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { GET_HOME_POSTS_REQUEST, GET_HOME_POSTS_FAILURE, GET_HOME_POSTS_SUCCESS, GET_UNAUTHORIZED_POSTS_FAILURE, GET_UNAUTHORIZED_POSTS_REQUEST, GET_UNAUTHORIZED_POSTS_SUCCESS, SEARCH_FAILURE, SEARCH_REQUEST, SEARCH_SUCCESS } from './actions';\nimport { CLEAR_HOME } from '../commonActions';\nimport { parseCookies } from 'nookies';\nconst initialState = {\n  data: {\n    results: []\n  },\n  error: null,\n  search: null\n};\nexport const handleNonPaginatedResult = (stateArray, responseArray) => {\n  for (let i = 0; i < stateArray.length; i++) {\n    for (let x = 0; x < responseArray.length; x++) {\n      if (stateArray[i].id == responseArray[x].id) {\n        stateArray[i] = responseArray[x];\n      }\n    }\n  }\n\n  return stateArray;\n};\nexport default function (state = initialState, {\n  type,\n  payload\n}) {\n  switch (type) {\n    case GET_HOME_POSTS_REQUEST:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        error: ''\n      });\n\n    case GET_HOME_POSTS_SUCCESS:\n      if (payload.isVoted) {\n        const results = handleNonPaginatedResult(state.data.results, payload.results);\n        payload.results = results;\n        return _objectSpread(_objectSpread({}, state), {}, {\n          data: payload\n        });\n      } else {\n        const prevPosts1 = state.data.results;\n        const newPosts1 = prevPosts1.concat(payload.results);\n        payload.results = newPosts1;\n        return _objectSpread(_objectSpread({}, state), {}, {\n          data: payload\n        });\n      }\n\n    case GET_HOME_POSTS_FAILURE:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        error: payload\n      });\n\n    case GET_UNAUTHORIZED_POSTS_REQUEST:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        error: ''\n      });\n\n    case GET_UNAUTHORIZED_POSTS_SUCCESS:\n      const prevPosts = state.data.results;\n      const newPosts = prevPosts.concat(payload.results);\n      payload.results = newPosts;\n      return _objectSpread(_objectSpread({}, state), {}, {\n        data: payload\n      });\n\n    case GET_UNAUTHORIZED_POSTS_FAILURE:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        error: payload\n      });\n\n    case SEARCH_REQUEST:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        error: ''\n      });\n\n    case SEARCH_SUCCESS:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        search: payload\n      });\n\n    case SEARCH_FAILURE:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        error: payload\n      });\n\n    case CLEAR_HOME:\n      const newData = {\n        results: []\n      };\n      return _objectSpread(_objectSpread({}, state), {}, {\n        data: newData\n      });\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["D:/repos/saalla-next.js/lib/home/reducers.js"],"names":["GET_HOME_POSTS_REQUEST","GET_HOME_POSTS_FAILURE","GET_HOME_POSTS_SUCCESS","GET_UNAUTHORIZED_POSTS_FAILURE","GET_UNAUTHORIZED_POSTS_REQUEST","GET_UNAUTHORIZED_POSTS_SUCCESS","SEARCH_FAILURE","SEARCH_REQUEST","SEARCH_SUCCESS","CLEAR_HOME","parseCookies","initialState","data","results","error","search","handleNonPaginatedResult","stateArray","responseArray","i","length","x","id","state","type","payload","isVoted","prevPosts1","newPosts1","concat","prevPosts","newPosts","newData"],"mappings":"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","sourcesContent":["import {\r\n  GET_HOME_POSTS_REQUEST, GET_HOME_POSTS_FAILURE, GET_HOME_POSTS_SUCCESS,\r\n  GET_UNAUTHORIZED_POSTS_FAILURE, GET_UNAUTHORIZED_POSTS_REQUEST, GET_UNAUTHORIZED_POSTS_SUCCESS,\r\n  SEARCH_FAILURE, SEARCH_REQUEST, SEARCH_SUCCESS\r\n} from './actions';\r\nimport { CLEAR_HOME } from '../commonActions';\r\nimport { parseCookies } from 'nookies';\r\n\r\nconst initialState = {\r\n  data: { results: [] },\r\n  error: null,\r\n  search: null\r\n};\r\n\r\nexport const handleNonPaginatedResult = (stateArray, responseArray) => {\r\n  for (let i = 0; i < stateArray.length; i++) {\r\n    for (let x = 0; x < responseArray.length; x++) {\r\n      if (stateArray[i].id == responseArray[x].id) {\r\n        stateArray[i] = responseArray[x]\r\n      }\r\n    }\r\n  }\r\n  return stateArray;\r\n}\r\n\r\nexport default function (state = initialState, { type, payload }) {\r\n  switch (type) {\r\n    case GET_HOME_POSTS_REQUEST:\r\n      return { ...state, error: '' };\r\n    case GET_HOME_POSTS_SUCCESS:\r\n      if (payload.isVoted) {\r\n        const results = handleNonPaginatedResult(state.data.results, payload.results);\r\n        payload.results = results;\r\n        return { ...state, data: payload };\r\n      } else {\r\n        const prevPosts1 = state.data.results;\r\n        const newPosts1 = prevPosts1.concat(payload.results);\r\n        payload.results = newPosts1;\r\n        return { ...state, data: payload };\r\n      }\r\n    case GET_HOME_POSTS_FAILURE:\r\n      return { ...state, error: payload };\r\n    case GET_UNAUTHORIZED_POSTS_REQUEST:\r\n      return { ...state, error: '' };\r\n    case GET_UNAUTHORIZED_POSTS_SUCCESS:\r\n      const prevPosts = state.data.results;\r\n      const newPosts = prevPosts.concat(payload.results);\r\n      payload.results = newPosts;\r\n      return { ...state, data: payload };\r\n    case GET_UNAUTHORIZED_POSTS_FAILURE:\r\n      return { ...state, error: payload };\r\n    case SEARCH_REQUEST:\r\n      return { ...state, error: '' };\r\n    case SEARCH_SUCCESS:\r\n      return { ...state, search: payload };\r\n    case SEARCH_FAILURE:\r\n      return { ...state, error: payload };\r\n    case CLEAR_HOME:\r\n      const newData = { results: [] }\r\n      return { ...state, data: newData };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}