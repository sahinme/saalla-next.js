{"ast":null,"code":"var _jsxFileName = \"D:\\\\repos\\\\saalla-next.js\\\\components\\\\PostDetailCard\\\\index.jsx\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Card from \"@material-ui/core/Card\";\nimport ReactPlayer from \"react-player\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Typography from \"@material-ui/core/Typography\";\nimport ShareIcon from \"@material-ui/icons/Share\";\nimport SportsHandballIcon from \"@material-ui/icons/SportsHandball\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport CommentList from \"../CommentList\";\nimport { TextField, Button, Divider } from \"@material-ui/core\";\nimport SendIcon from \"@material-ui/icons/Send\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { createCommentRequest } from \"../../lib/comment/actions\";\nimport LinkPre from \"../LinkPreview\";\nimport { MDBIcon } from \"mdbreact\";\nimport { isLogged, htmlToText } from \"../../lib/helpers\";\nimport PostMenu from \"../postMenu\";\nimport ImageModal from \"../ImageModal\";\nimport { Helmet } from \"react-helmet\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    padding: \"1rem\",\n    marginBottom: \"2rem\"\n  },\n  media: {\n    height: 0,\n    paddingTop: \"56.25%\" // 16:9\n\n  },\n  expand: {\n    transform: \"rotate(0deg)\",\n    marginLeft: \"auto\",\n    transition: theme.transitions.create(\"transform\", {\n      duration: theme.transitions.duration.shortest\n    })\n  },\n  expandOpen: {\n    transform: \"rotate(180deg)\"\n  },\n  avatar: {},\n  postImage: {\n    width: \"100%\"\n  },\n  leftSide: {\n    width: \"48px\",\n    backgroundColor: \"#edebebcc\"\n  }\n}));\n\nfunction PostDetailCard(props) {\n  const classes = useStyles();\n  const [comment, setComment] = React.useState(null);\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [isOpen, setOpen] = React.useState(false);\n  const router = useRouter();\n\n  const handleChange = e => {\n    setComment(e.target.value);\n  };\n\n  const handleSubmit = () => {\n    if (!isLogged()) {\n      router.push(\"/giris-yap\");\n      return;\n    }\n\n    const values = {};\n    values.postId = id;\n    values.content = comment;\n    const {\n      createComment\n    } = props;\n    createComment(values);\n    document.getElementById(\"comment\").value = \"\";\n  };\n\n  const {\n    id,\n    img,\n    createdDate,\n    content,\n    contentType,\n    community,\n    comments,\n    user,\n    linkUrl,\n    onVote,\n    userPostVote,\n    voteCount\n  } = props;\n\n  const handleVote = value => {\n    if (!isLogged()) {\n      router.push(\"/giris-yap\");\n      return;\n    }\n\n    const values = {\n      postId: id,\n      value\n    };\n    onVote(values);\n  };\n\n  const renderMedia = () => {\n    if (contentType == 50) {\n      return __jsx(\"div\", {\n        className: classes.imgContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 9\n        }\n      }, __jsx(LinkPre, {\n        url: linkUrl,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }\n      }));\n    }\n\n    if (contentType == 20) {\n      return __jsx(\"div\", {\n        className: \"player-wrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 9\n        }\n      }, __jsx(ReactPlayer, {\n        className: \"react-player\",\n        controls: true,\n        url: img,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }\n      }));\n    } else {\n      return __jsx(\"div\", {\n        className: classes.imgContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 9\n        }\n      }, __jsx(\"img\", {\n        style: {\n          cursor: \"pointer\"\n        },\n        onClick: () => setOpen(true),\n        className: classes.postImage,\n        src: img,\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }\n      }), isOpen && __jsx(ImageModal, {\n        imageUrl: img,\n        onClose: () => setOpen(false),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }\n      }));\n    }\n  };\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const calculateSallamaCount = comments => {\n    let count = 0;\n\n    if (comments && comments.length > 0) {\n      comments.map(x => count += x.replies.length);\n      count += comments.length;\n    }\n\n    return count;\n  };\n\n  const menuItems = [{\n    title: \"Şikayet Et\",\n    onClick: handleClose\n  }];\n  return __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 5\n    }\n  }, __jsx(Card, {\n    className: \"post_card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: classes.leftSide,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"vote_cont\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }, __jsx(MDBIcon, {\n    className: userPostVote && userPostVote.value == 1 ? \"angle-double-up_checked\" : \"angle-double-up\",\n    icon: \"angle-double-up\",\n    onClick: () => handleVote(userPostVote && userPostVote.value == 1 ? 0 : 1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }\n  }), __jsx(\"p\", {\n    className: \"vote\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }\n  }, voteCount), __jsx(MDBIcon, {\n    className: userPostVote && userPostVote.value == -1 ? \"angle-double-down_checked\" : \"angle-double-down\",\n    icon: \"angle-double-down\",\n    onClick: () => handleVote(userPostVote && userPostVote.value == -1 ? 0 : -1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }\n  }))), __jsx(\"div\", {\n    className: \"right_side_post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 9\n    }\n  }, __jsx(CardHeader, {\n    style: {\n      padding: \"16px 16px 0 16px\"\n    },\n    avatar: __jsx(Avatar, {\n      \"aria-label\": \"recipe\",\n      src: community && community.logoPath,\n      className: classes.avatar,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 15\n      }\n    }),\n    action: __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 15\n      }\n    }, __jsx(IconButton, {\n      onClick: handleClick,\n      \"aria-label\": \"settings\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }\n    }, __jsx(MoreVertIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 19\n      }\n    })), __jsx(PostMenu, {\n      open: Boolean(anchorEl),\n      onClose: handleClose,\n      anchorEl: anchorEl,\n      onClose: handleClose,\n      menuItems: menuItems,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }\n    })),\n    title: __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 15\n      }\n    }, __jsx(Link, {\n      href: `/t/${community.slug}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 17\n      }\n    }, __jsx(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 19\n      }\n    }, community.name)), __jsx(\"small\", {\n      style: {\n        margin: \"4px\",\n        fontWeight: 600,\n        fontSize: \"92%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 17\n      }\n    }, \"/\"), __jsx(Link, {\n      href: `/${user.userName}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 17\n      }\n    }, __jsx(\"span\", {\n      className: \"posted_by\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 19\n      }\n    }, \"u/\" + user.userName + \" \" + \"tarafından\"))),\n    subheader: createdDate && moment(createdDate).fromNow(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 11\n    }\n  }), __jsx(CardContent, {\n    style: {\n      padding: \"5px 16px 16px 25px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: content\n    },\n    variant: \"body2\",\n    style: {\n      color: \"black\"\n    },\n    component: \"p\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 13\n    }\n  })), renderMedia(), __jsx(Divider, {\n    style: {\n      margin: \"15px 0px 0px 0px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 11\n    }\n  }), __jsx(CardActions, {\n    disableSpacing: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 11\n    }\n  }, __jsx(IconButton, {\n    \"aria-label\": \"add to favorites\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 13\n    }\n  }, __jsx(SportsHandballIcon, {\n    style: {\n      padding: \"3px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 15\n    }\n  })), __jsx(\"small\", {\n    style: {\n      marginLeft: \"-5px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 13\n    }\n  }, comments && calculateSallamaCount(comments), \" sallama\"), __jsx(IconButton, {\n    \"aria-label\": \"share\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 13\n    }\n  }, __jsx(ShareIcon, {\n    style: {\n      padding: \"3px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 15\n    }\n  })), __jsx(\"small\", {\n    style: {\n      marginLeft: \"-5px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 13\n    }\n  }, \"Payla\\u015F\")), __jsx(Collapse, {\n    in: true,\n    timeout: \"auto\",\n    unmountOnExit: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 11\n    }\n  }, __jsx(TextField, {\n    id: \"comment\",\n    label: \"Bu g\\xF6nderiye salla\",\n    multiline: true,\n    name: \"comment\",\n    onChange: handleChange,\n    rows: 4,\n    variant: \"outlined\",\n    style: {\n      width: \"100%\",\n      borderRadius: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 13\n    }\n  }), __jsx(Button, {\n    className: \"comment_button\",\n    variant: \"contained\",\n    color: \"primary\",\n    disabled: !comment,\n    onClick: handleSubmit,\n    endIcon: __jsx(SendIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 24\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 13\n    }\n  }, \"Salla Gitsin\"), __jsx(CommentList, {\n    comments: comments,\n    postId: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 13\n    }\n  })))));\n}\n\nconst mapDispatchToProps = dispatch => ({\n  createComment: payload => dispatch(createCommentRequest(payload))\n});\n\nconst mapStateToProps = state => ({});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PostDetailCard);","map":{"version":3,"sources":["D:/repos/saalla-next.js/components/PostDetailCard/index.jsx"],"names":["React","moment","connect","makeStyles","Collapse","Card","ReactPlayer","CardHeader","CardContent","CardActions","Avatar","IconButton","Typography","ShareIcon","SportsHandballIcon","MoreVertIcon","CommentList","TextField","Button","Divider","SendIcon","Link","useRouter","createCommentRequest","LinkPre","MDBIcon","isLogged","htmlToText","PostMenu","ImageModal","Helmet","useStyles","theme","root","padding","marginBottom","media","height","paddingTop","expand","transform","marginLeft","transition","transitions","create","duration","shortest","expandOpen","avatar","postImage","width","leftSide","backgroundColor","PostDetailCard","props","classes","comment","setComment","useState","anchorEl","setAnchorEl","isOpen","setOpen","router","handleChange","e","target","value","handleSubmit","push","values","postId","id","content","createComment","document","getElementById","img","createdDate","contentType","community","comments","user","linkUrl","onVote","userPostVote","voteCount","handleVote","renderMedia","imgContainer","cursor","handleClick","event","currentTarget","handleClose","calculateSallamaCount","count","length","map","x","replies","menuItems","title","onClick","logoPath","Boolean","slug","name","margin","fontWeight","fontSize","userName","fromNow","__html","color","borderRadius","mapDispatchToProps","dispatch","payload","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport moment from \"moment\";\r\nimport { connect } from \"react-redux\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport ReactPlayer from \"react-player\";\r\nimport CardHeader from \"@material-ui/core/CardHeader\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport CardActions from \"@material-ui/core/CardActions\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport ShareIcon from \"@material-ui/icons/Share\";\r\nimport SportsHandballIcon from \"@material-ui/icons/SportsHandball\";\r\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\r\nimport CommentList from \"../CommentList\";\r\nimport { TextField, Button, Divider } from \"@material-ui/core\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/router\";\r\nimport { createCommentRequest } from \"../../lib/comment/actions\";\r\nimport LinkPre from \"../LinkPreview\";\r\nimport { MDBIcon } from \"mdbreact\";\r\nimport { isLogged, htmlToText } from \"../../lib/helpers\";\r\nimport PostMenu from \"../postMenu\";\r\nimport ImageModal from \"../ImageModal\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    padding: \"1rem\",\r\n    marginBottom: \"2rem\",\r\n  },\r\n  media: {\r\n    height: 0,\r\n    paddingTop: \"56.25%\", // 16:9\r\n  },\r\n  expand: {\r\n    transform: \"rotate(0deg)\",\r\n    marginLeft: \"auto\",\r\n    transition: theme.transitions.create(\"transform\", {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    transform: \"rotate(180deg)\",\r\n  },\r\n  avatar: {},\r\n  postImage: {\r\n    width: \"100%\",\r\n  },\r\n  leftSide: {\r\n    width: \"48px\",\r\n    backgroundColor: \"#edebebcc\",\r\n  },\r\n}));\r\n\r\nfunction PostDetailCard(props) {\r\n  const classes = useStyles();\r\n  const [comment, setComment] = React.useState(null);\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [isOpen, setOpen] = React.useState(false);\r\n  const router = useRouter();\r\n\r\n  const handleChange = (e) => {\r\n    setComment(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    if (!isLogged()) {\r\n      router.push(\"/giris-yap\");\r\n      return;\r\n    }\r\n    const values = {};\r\n    values.postId = id;\r\n    values.content = comment;\r\n    const { createComment } = props;\r\n    createComment(values);\r\n    document.getElementById(\"comment\").value = \"\";\r\n  };\r\n\r\n  const {\r\n    id,\r\n    img,\r\n    createdDate,\r\n    content,\r\n    contentType,\r\n    community,\r\n    comments,\r\n    user,\r\n    linkUrl,\r\n    onVote,\r\n    userPostVote,\r\n    voteCount,\r\n  } = props;\r\n\r\n  const handleVote = (value) => {\r\n    if (!isLogged()) {\r\n      router.push(\"/giris-yap\");\r\n      return;\r\n    }\r\n    const values = { postId: id, value };\r\n    onVote(values);\r\n  };\r\n\r\n  const renderMedia = () => {\r\n    if (contentType == 50) {\r\n      return (\r\n        <div className={classes.imgContainer}>\r\n          <LinkPre url={linkUrl} />\r\n        </div>\r\n      );\r\n    }\r\n    if (contentType == 20) {\r\n      return (\r\n        <div className=\"player-wrapper\">\r\n          <ReactPlayer className=\"react-player\" controls url={img} />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className={classes.imgContainer}>\r\n          <img\r\n            style={{ cursor: \"pointer\" }}\r\n            onClick={() => setOpen(true)}\r\n            className={classes.postImage}\r\n            src={img}\r\n            alt=\"\"\r\n          />\r\n          {isOpen && (\r\n            <ImageModal imageUrl={img} onClose={() => setOpen(false)} />\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const calculateSallamaCount = (comments) => {\r\n    let count = 0;\r\n    if (comments && comments.length > 0) {\r\n      comments.map((x) => (count += x.replies.length));\r\n      count += comments.length;\r\n    }\r\n    return count;\r\n  };\r\n\r\n  const menuItems = [{ title: \"Şikayet Et\", onClick: handleClose }];\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {/*  {community && content && (\r\n        <Helmet title={community.name + \" salladı: \" + htmlToText(content)}>\r\n          <meta\r\n            name=\"description\"\r\n            content={community.name + \" salladı: \" + htmlToText(content)}\r\n          />\r\n        </Helmet>\r\n      )} */}\r\n      <Card className=\"post_card\">\r\n        <div className={classes.leftSide}>\r\n          <div className=\"vote_cont\">\r\n            <MDBIcon\r\n              className={\r\n                userPostVote && userPostVote.value == 1\r\n                  ? \"angle-double-up_checked\"\r\n                  : \"angle-double-up\"\r\n              }\r\n              icon=\"angle-double-up\"\r\n              onClick={() =>\r\n                handleVote(userPostVote && userPostVote.value == 1 ? 0 : 1)\r\n              }\r\n            />\r\n            <p className=\"vote\">{voteCount}</p>\r\n            <MDBIcon\r\n              className={\r\n                userPostVote && userPostVote.value == -1\r\n                  ? \"angle-double-down_checked\"\r\n                  : \"angle-double-down\"\r\n              }\r\n              icon=\"angle-double-down\"\r\n              onClick={() =>\r\n                handleVote(userPostVote && userPostVote.value == -1 ? 0 : -1)\r\n              }\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"right_side_post\">\r\n          <CardHeader\r\n            style={{ padding: \"16px 16px 0 16px\" }}\r\n            avatar={\r\n              <Avatar\r\n                aria-label=\"recipe\"\r\n                src={community && community.logoPath}\r\n                className={classes.avatar}\r\n              ></Avatar>\r\n            }\r\n            action={\r\n              <div>\r\n                <IconButton onClick={handleClick} aria-label=\"settings\">\r\n                  <MoreVertIcon />\r\n                </IconButton>\r\n                <PostMenu\r\n                  open={Boolean(anchorEl)}\r\n                  onClose={handleClose}\r\n                  anchorEl={anchorEl}\r\n                  onClose={handleClose}\r\n                  menuItems={menuItems}\r\n                />\r\n              </div>\r\n            }\r\n            title={\r\n              <div>\r\n                <Link href={`/t/${community.slug}`}>\r\n                  <a>{community.name}</a>\r\n                </Link>\r\n                <small\r\n                  style={{ margin: \"4px\", fontWeight: 600, fontSize: \"92%\" }}\r\n                >\r\n                  /\r\n                </small>\r\n                <Link href={`/${user.userName}`}>\r\n                  <span className=\"posted_by\">\r\n                    {\"u/\" + user.userName + \" \" + \"tarafından\"}\r\n                  </span>\r\n                </Link>\r\n              </div>\r\n            }\r\n            subheader={createdDate && moment(createdDate).fromNow()}\r\n          />\r\n          <CardContent style={{ padding: \"5px 16px 16px 25px\" }}>\r\n            <div\r\n              dangerouslySetInnerHTML={{ __html: content }}\r\n              variant=\"body2\"\r\n              style={{ color: \"black\" }}\r\n              component=\"p\"\r\n            />\r\n          </CardContent>\r\n          {renderMedia()}\r\n          <Divider style={{ margin: \"15px 0px 0px 0px\" }} />\r\n\r\n          <CardActions disableSpacing>\r\n            <IconButton aria-label=\"add to favorites\">\r\n              <SportsHandballIcon style={{ padding: \"3px\" }} />\r\n            </IconButton>\r\n            <small style={{ marginLeft: \"-5px\" }}>\r\n              {comments && calculateSallamaCount(comments)} sallama\r\n            </small>\r\n            <IconButton aria-label=\"share\">\r\n              <ShareIcon style={{ padding: \"3px\" }}></ShareIcon>\r\n            </IconButton>\r\n            <small style={{ marginLeft: \"-5px\" }}>Paylaş</small>\r\n          </CardActions>\r\n          <Collapse in={true} timeout=\"auto\" unmountOnExit>\r\n            <TextField\r\n              id=\"comment\"\r\n              label=\"Bu gönderiye salla\"\r\n              multiline\r\n              name=\"comment\"\r\n              onChange={handleChange}\r\n              rows={4}\r\n              variant=\"outlined\"\r\n              style={{ width: \"100%\", borderRadius: \"10px\" }}\r\n            />\r\n            <Button\r\n              className=\"comment_button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              disabled={!comment}\r\n              onClick={handleSubmit}\r\n              endIcon={<SendIcon />}\r\n            >\r\n              Salla Gitsin\r\n            </Button>\r\n            <CommentList comments={comments} postId={id} />\r\n          </Collapse>\r\n        </div>\r\n      </Card>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  createComment: (payload) => dispatch(createCommentRequest(payload)),\r\n});\r\n\r\nconst mapStateToProps = (state) => ({});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PostDetailCard);\r\n"]},"metadata":{},"sourceType":"module"}