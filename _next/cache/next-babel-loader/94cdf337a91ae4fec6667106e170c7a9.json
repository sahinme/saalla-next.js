{"ast":null,"code":"var _jsxFileName = \"D:\\\\repos\\\\saalla-next.js\\\\components\\\\Layout\\\\index.jsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState } from \"react\";\nimport Link from \"next/link\";\nimport Head from \"next/head\";\nimport { Row, Col, Container } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { getPopularCommnityListRequest } from \"../../lib/community/actions\";\nimport { getHomePostsRequest, getUnauthorizedPostsRequest } from \"../../lib/home/actions\";\nimport { votePostRequest } from \"../../lib/posts/actions\";\nimport Loader from \"../Loader\";\nimport { clearStoreRequest } from \"../../lib/commonActions\";\nimport { Helmet } from \"react-helmet\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport SocialCard from \"../SocialCard\";\nimport PopularTags from \"../PopularTags\";\nimport CreatePostTab from \"../CreatePostTab\";\nimport CustomizedSnackbars from \"../Snackbar\";\nimport { readLocalStorage } from \"../../lib/helpers\";\nimport { parseCookies } from \"nookies\";\n\nfunction Home(props) {\n  const {\n    0: pageNumber,\n    1: setNumber\n  } = useState(1);\n  const [auth, setAuth] = React.useState({\n    data: {\n      token: null,\n      user: null\n    },\n    error: null\n  });\n  useEffect(() => {\n    const user = readLocalStorage(\"user\");\n    const token = readLocalStorage(\"token\");\n\n    if (user && token) {\n      const payload = {\n        data: {\n          user,\n          token\n        },\n        error: null\n      };\n      setAuth(payload);\n    }\n\n    const {\n      getHomePosts,\n      getUnauthorizedPosts\n    } = props;\n\n    if (token) {\n      getHomePosts({\n        pageNumber: 1,\n        pageSize: 6,\n        loderStart: true\n      });\n    } else {\n      getUnauthorizedPosts({\n        pageNumber: 1,\n        pageSize: 6,\n        loderStart: true\n      });\n    }\n\n    return () => {\n      props.clearStore(\"home_posts\");\n    };\n  }, []);\n\n  const onVote = values => {\n    const {\n      votePost\n    } = props;\n\n    const payload = _objectSpread(_objectSpread({}, values), {}, {\n      pageSize: 6,\n      isVoted: true\n    });\n\n    votePost(payload);\n  };\n\n  const fetchMoreData = () => {\n    const newNumber = pageNumber + 1;\n    const {\n      getUnauthorizedPosts,\n      getHomePosts\n    } = props;\n    auth.token ? getHomePosts({\n      pageNumber: newNumber,\n      pageSize: 6,\n      loderStart: false,\n      token: readLocalStorage(\"token\")\n    }) : getUnauthorizedPosts({\n      pageNumber: newNumber,\n      pageSize: 6,\n      loderStart: false\n    });\n    setNumber(newNumber);\n  };\n\n  const {\n    home,\n    userCommunities\n  } = props;\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, \"Hep Beraber Sall\\u0131yoruz | Saalla\"), __jsx(\"meta\", {\n    name: \"description\",\n    content: \"Saalla, insanlar\\u0131n ilgi alanlar\\u0131na g\\xF6re sallayabildikleri topluluk a\\u011F\\u0131d\\u0131r. \\u0130lgilendi\\u011Finiz topluluklar\\u0131 bulun ve \\xE7evrimi\\xE7i bir toplulu\\u011Fun par\\xE7as\\u0131 olun!\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    charSet: \"utf-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    name: \"viewport\",\n    content: \"initial-scale=1.0, width=device-width\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  })), __jsx(Container, {\n    style: {\n      marginTop: \"6rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, __jsx(Col, {\n    xs: 12,\n    md: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, __jsx(CreatePostTab, {\n    user: auth.user,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }))), __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, __jsx(Col, {\n    style: {\n      paddingBottom: \"4px\",\n      paddingTop: \"20px\"\n    },\n    xs: 12,\n    md: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, \"Populer Sallamalar\"))), __jsx(Row, {\n    style: {\n      flexWrap: \"wrap-reverse\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, __jsx(Col, {\n    style: {\n      paddingBottom: \"10px\",\n      paddingTop: \"20px\"\n    },\n    xs: 12,\n    md: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, userCommunities && userCommunities.length <= 0 && __jsx(Link, {\n    href: \"/kesfet\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }, __jsx(CustomizedSnackbars, {\n    message: \"Topluluklari Kesfet - Hi\\xE7bir toplulu\\u011Fa \\xFCye de\\u011Filsin \\u015Eimdi tam zaman\\u0131\",\n    type: \"warning\",\n    style: {\n      cursor: \"pointer\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  })), __jsx(InfiniteScroll, {\n    dataLength: home && home.results && home.results.length,\n    next: fetchMoreData,\n    hasMore: home && home.hasNext,\n    loader: __jsx(Loader, {\n      overlay: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 23\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, home.results.map(item => __jsx(SocialCard, {\n    key: item.id,\n    pSlug: item.slug,\n    id: item.id,\n    img: item.mediaContentPath,\n    createdDate: item.createdDateTime,\n    content: item.content,\n    contentType: item.contentType,\n    community: item.community,\n    pageNumber: item.pageNumber,\n    comments: item.comments,\n    user: item.user,\n    linkUrl: item.linkUrl,\n    voteCount: item.voteCount,\n    userPostVote: item.userPostVote,\n    onVote: onVote,\n    profilePosts: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  })))), __jsx(Col, {\n    style: {\n      paddingBottom: \"10px\"\n    },\n    xs: 12,\n    md: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    style: {\n      position: \"-webkit-sticky\",\n      position: \"sticky\",\n      top: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }, __jsx(PopularTags, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }\n  }))))));\n}\n\nconst mapDispatchToProps = dispatch => ({\n  getPopularsCommunity: () => dispatch(getPopularCommnityListRequest({})),\n  clearStore: name => dispatch(clearStoreRequest(name)),\n  getHomePosts: payload => dispatch(getHomePostsRequest(payload)),\n  getUnauthorizedPosts: payload => dispatch(getUnauthorizedPostsRequest(payload)),\n  votePost: payload => dispatch(votePostRequest(payload))\n});\n\nconst mapStateToProps = state => ({\n  home: state.home.data,\n  userCommunities: state.userCommunities.data\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);","map":{"version":3,"sources":["D:/repos/saalla-next.js/components/Layout/index.jsx"],"names":["React","useEffect","useState","Link","Head","Row","Col","Container","connect","getPopularCommnityListRequest","getHomePostsRequest","getUnauthorizedPostsRequest","votePostRequest","Loader","clearStoreRequest","Helmet","InfiniteScroll","SocialCard","PopularTags","CreatePostTab","CustomizedSnackbars","readLocalStorage","parseCookies","Home","props","pageNumber","setNumber","auth","setAuth","data","token","user","error","payload","getHomePosts","getUnauthorizedPosts","pageSize","loderStart","clearStore","onVote","values","votePost","isVoted","fetchMoreData","newNumber","home","userCommunities","marginTop","paddingBottom","paddingTop","flexWrap","length","cursor","results","hasNext","map","item","id","slug","mediaContentPath","createdDateTime","content","contentType","community","comments","linkUrl","voteCount","userPostVote","position","top","mapDispatchToProps","dispatch","getPopularsCommunity","name","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport Head from \"next/head\";\r\nimport { Row, Col, Container } from \"react-bootstrap\";\r\nimport { connect } from \"react-redux\";\r\nimport { getPopularCommnityListRequest } from \"../../lib/community/actions\";\r\nimport {\r\n  getHomePostsRequest,\r\n  getUnauthorizedPostsRequest,\r\n} from \"../../lib/home/actions\";\r\nimport { votePostRequest } from \"../../lib/posts/actions\";\r\nimport Loader from \"../Loader\";\r\nimport { clearStoreRequest } from \"../../lib/commonActions\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\nimport SocialCard from \"../SocialCard\";\r\nimport PopularTags from \"../PopularTags\";\r\nimport CreatePostTab from \"../CreatePostTab\";\r\nimport CustomizedSnackbars from \"../Snackbar\";\r\nimport { readLocalStorage } from \"../../lib/helpers\";\r\nimport { parseCookies } from \"nookies\";\r\n\r\nfunction Home(props) {\r\n  const [pageNumber, setNumber] = useState(1);\r\n  const [auth, setAuth] = React.useState({\r\n    data: { token: null, user: null },\r\n    error: null,\r\n  });\r\n  useEffect(() => {\r\n    const user = readLocalStorage(\"user\");\r\n    const token = readLocalStorage(\"token\");\r\n    if (user && token) {\r\n      const payload = { data: { user, token }, error: null };\r\n      setAuth(payload);\r\n    }\r\n    const { getHomePosts, getUnauthorizedPosts } = props;\r\n    if (token) {\r\n      getHomePosts({ pageNumber: 1, pageSize: 6, loderStart: true });\r\n    } else {\r\n      getUnauthorizedPosts({ pageNumber: 1, pageSize: 6, loderStart: true });\r\n    }\r\n    return () => {\r\n      props.clearStore(\"home_posts\");\r\n    };\r\n  }, []);\r\n\r\n  const onVote = (values) => {\r\n    const { votePost } = props;\r\n    const payload = { ...values, pageSize: 6, isVoted: true };\r\n    votePost(payload);\r\n  };\r\n\r\n  const fetchMoreData = () => {\r\n    const newNumber = pageNumber + 1;\r\n    const { getUnauthorizedPosts, getHomePosts } = props;\r\n    auth.token\r\n      ? getHomePosts({\r\n          pageNumber: newNumber,\r\n          pageSize: 6,\r\n          loderStart: false,\r\n          token: readLocalStorage(\"token\"),\r\n        })\r\n      : getUnauthorizedPosts({\r\n          pageNumber: newNumber,\r\n          pageSize: 6,\r\n          loderStart: false,\r\n        });\r\n    setNumber(newNumber);\r\n  };\r\n\r\n  const { home, userCommunities } = props;\r\n  return (\r\n    <div>\r\n      <Head>\r\n        <title>Hep Beraber Sallıyoruz | Saalla</title>\r\n        <meta\r\n          name=\"description\"\r\n          content=\"Saalla, insanların ilgi alanlarına göre sallayabildikleri topluluk ağıdır. İlgilendiğiniz toplulukları bulun ve çevrimiçi bir topluluğun parçası olun!\"\r\n        />\r\n        <meta charSet=\"utf-8\" />\r\n        <meta name=\"viewport\" content=\"initial-scale=1.0, width=device-width\" />\r\n      </Head>\r\n      <Container style={{ marginTop: \"6rem\" }}>\r\n        <Row>\r\n          <Col xs={12} md={12}>\r\n            <CreatePostTab user={auth.user} />\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col\r\n            style={{\r\n              paddingBottom: \"4px\",\r\n              paddingTop: \"20px\",\r\n            }}\r\n            xs={12}\r\n            md={8}\r\n          >\r\n            <b>Populer Sallamalar</b>\r\n          </Col>\r\n        </Row>\r\n        <Row style={{ flexWrap: \"wrap-reverse\" }}>\r\n          <Col\r\n            style={{\r\n              paddingBottom: \"10px\",\r\n              paddingTop: \"20px\",\r\n            }}\r\n            xs={12}\r\n            md={8}\r\n          >\r\n            {userCommunities && userCommunities.length <= 0 && (\r\n              <Link href=\"/kesfet\">\r\n                <CustomizedSnackbars\r\n                  message=\"Topluluklari Kesfet - Hiçbir topluluğa üye değilsin Şimdi tam zamanı\"\r\n                  type=\"warning\"\r\n                  style={{ cursor: \"pointer\" }}\r\n                />\r\n              </Link>\r\n            )}\r\n            <InfiniteScroll\r\n              dataLength={home && home.results && home.results.length}\r\n              next={fetchMoreData}\r\n              hasMore={home && home.hasNext}\r\n              loader={<Loader overlay={false} />}\r\n            >\r\n              {home.results.map((item) => (\r\n                <SocialCard\r\n                  key={item.id}\r\n                  pSlug={item.slug}\r\n                  id={item.id}\r\n                  img={item.mediaContentPath}\r\n                  createdDate={item.createdDateTime}\r\n                  content={item.content}\r\n                  contentType={item.contentType}\r\n                  community={item.community}\r\n                  pageNumber={item.pageNumber}\r\n                  comments={item.comments}\r\n                  user={item.user}\r\n                  linkUrl={item.linkUrl}\r\n                  voteCount={item.voteCount}\r\n                  userPostVote={item.userPostVote}\r\n                  onVote={onVote}\r\n                  profilePosts={false}\r\n                />\r\n              ))}\r\n            </InfiniteScroll>\r\n          </Col>\r\n          <Col style={{ paddingBottom: \"10px\" }} xs={12} md={4}>\r\n            <div\r\n              style={{ position: \"-webkit-sticky\", position: \"sticky\", top: 0 }}\r\n            >\r\n              <PopularTags />\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  getPopularsCommunity: () => dispatch(getPopularCommnityListRequest({})),\r\n  clearStore: (name) => dispatch(clearStoreRequest(name)),\r\n  getHomePosts: (payload) => dispatch(getHomePostsRequest(payload)),\r\n  getUnauthorizedPosts: (payload) =>\r\n    dispatch(getUnauthorizedPostsRequest(payload)),\r\n  votePost: (payload) => dispatch(votePostRequest(payload)),\r\n});\r\n\r\nconst mapStateToProps = (state) => ({\r\n  home: state.home.data,\r\n  userCommunities: state.userCommunities.data,\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);\r\n"]},"metadata":{},"sourceType":"module"}