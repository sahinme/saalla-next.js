{"ast":null,"code":"import { fromPairs } from 'lodash/fp';\nimport { parseCookies } from 'nookies';\nconst localStorage = global.localStorage && global.localStorage.removeItem ? global.localStorage : function () {\n  let store = {};\n  return {\n    getItem(key) {\n      return store[key] || null;\n    },\n\n    setItem(key, value) {\n      store[key] = value.toString();\n    },\n\n    clear() {\n      store = {};\n    },\n\n    removeItem(key) {\n      store = Object.keys(store).filter(k => key !== k).reduce((accumulator, currentItem) => {\n        accumulator[currentItem] = store[currentItem];\n        return accumulator;\n      }, {});\n    }\n\n  };\n}();\nexport const readLocalStorage = key => {\n  if (Array.isArray(key)) {\n    return fromPairs(key.map(k => [k, localStorage.getItem(k) && JSON.parse(localStorage.getItem(k))]));\n  }\n\n  return localStorage.getItem(key) && JSON.parse(localStorage.getItem(key));\n};\nexport const loadState = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n\n    if (serializedState === null) {\n      return undefined;\n    }\n\n    return JSON.parse(serializedState);\n  } catch (err) {\n    return undefined;\n  }\n};\nexport const isLoggedWithCookies = ctx => {\n  const cookies = parseCookies(ctx);\n  return cookies && cookies.token && cookies.user;\n};\nexport const writeLocalStorage = (key, value) => {\n  const keys = typeof key === 'object' ? key : {\n    [key]: value\n  };\n  Object.entries(keys).map(([k, val]) => localStorage.setItem(k, JSON.stringify(val)));\n  return keys;\n};\nexport const removeLocalStorage = key => {\n  const keys = Array.isArray(key) ? key : [key];\n  keys.forEach(k => localStorage.removeItem(k));\n  return keys;\n};\nexport const clearLocalStorage = () => {\n  localStorage.clear();\n};\nexport const getSearchParams = params => Object.keys(params).map(key => {\n  if (typeof params[key] !== 'undefined') {\n    return `${encodeURIComponent(key)}=${encodeURIComponent(params[key]) ? encodeURIComponent(params[key]) : ''}`;\n  }\n}).join('&');\nexport const generateString = () => {\n  const name = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n  return name;\n};\nexport const isLogged = () => {\n  const token = readLocalStorage(\"token\");\n  const user = readLocalStorage(\"user\");\n  return token && user;\n};\nexport const getParameterByName = (name, url) => {\n  if (!url) url = window.location.href;\n  name = name.replace(/[\\[\\]]/g, '\\\\$&');\n  var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n      results = regex.exec(url);\n  if (!results) return null;\n  if (!results[2]) return '';\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n};\nexport const htmlToText = html => {\n  var temp = document.createElement(\"div\");\n  temp.innerHTML = html;\n  return temp.textContent || temp.innerText || \"\";\n};","map":{"version":3,"sources":["D:/repos/saalla-next.js/lib/helpers.js"],"names":["fromPairs","parseCookies","localStorage","global","removeItem","store","getItem","key","setItem","value","toString","clear","Object","keys","filter","k","reduce","accumulator","currentItem","readLocalStorage","Array","isArray","map","JSON","parse","loadState","serializedState","undefined","err","isLoggedWithCookies","ctx","cookies","token","user","writeLocalStorage","entries","val","stringify","removeLocalStorage","forEach","clearLocalStorage","getSearchParams","params","encodeURIComponent","join","generateString","name","Math","random","substring","isLogged","getParameterByName","url","window","location","href","replace","regex","RegExp","results","exec","decodeURIComponent","htmlToText","html","temp","document","createElement","innerHTML","textContent","innerText"],"mappings":"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","sourcesContent":["import { fromPairs } from 'lodash/fp';\r\nimport { parseCookies } from 'nookies';\r\n\r\nconst localStorage = global.localStorage && global.localStorage.removeItem\r\n    ? global.localStorage\r\n    : (function () {\r\n        let store = {};\r\n        return {\r\n            getItem(key) {\r\n                return store[key] || null;\r\n            },\r\n            setItem(key, value) {\r\n                store[key] = value.toString();\r\n            },\r\n            clear() {\r\n                store = {};\r\n            },\r\n            removeItem(key) {\r\n                store = Object.keys(store)\r\n                    .filter(k => key !== k)\r\n                    .reduce((accumulator, currentItem) => {\r\n                        accumulator[currentItem] = store[currentItem];\r\n                        return accumulator;\r\n                    }, {});\r\n            },\r\n        };\r\n    }());\r\n\r\nexport const readLocalStorage = (key) => {\r\n    if (Array.isArray(key)) {\r\n        return fromPairs(key.map(k => [k, localStorage.getItem(k) && JSON.parse(localStorage.getItem(k))]));\r\n    }\r\n    return localStorage.getItem(key) && JSON.parse(localStorage.getItem(key));\r\n};\r\n\r\nexport const loadState = (key) => {\r\n    try {\r\n        const serializedState = localStorage.getItem(key);\r\n        if (serializedState === null) {\r\n            return undefined;\r\n        }\r\n        return JSON.parse(serializedState);\r\n    } catch (err) {\r\n        return undefined;\r\n    }\r\n};\r\n\r\n\r\nexport const isLoggedWithCookies = (ctx) => {\r\n    const cookies = parseCookies(ctx)\r\n    return cookies && cookies.token && cookies.user;\r\n}\r\n\r\n\r\nexport const writeLocalStorage = (key, value) => {\r\n    const keys = typeof key === 'object' ? key : { [key]: value };\r\n    Object.entries(keys).map(([k, val]) => localStorage.setItem(k, JSON.stringify(val)));\r\n    return keys;\r\n};\r\n\r\nexport const removeLocalStorage = (key) => {\r\n    const keys = Array.isArray(key) ? key : [key];\r\n    keys.forEach(k => localStorage.removeItem(k));\r\n    return keys;\r\n};\r\n\r\nexport const clearLocalStorage = () => {\r\n    localStorage.clear();\r\n};\r\n\r\nexport const getSearchParams = params => Object.keys(params).map((key) => {\r\n    if (typeof (params[key]) !== 'undefined') {\r\n        return `${encodeURIComponent(key)}=${encodeURIComponent(params[key]) ? encodeURIComponent(params[key]) : ''}`;\r\n    }\r\n}).join('&');\r\n\r\nexport const generateString = () => {\r\n    const name = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\r\n    return name;\r\n}\r\n\r\nexport const isLogged = () => {\r\n    const token = readLocalStorage(\"token\");\r\n    const user = readLocalStorage(\"user\");\r\n    return (token && user);\r\n}\r\n\r\nexport const getParameterByName = (name, url) => {\r\n    if (!url) url = window.location.href;\r\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\r\n    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\r\n        results = regex.exec(url);\r\n    if (!results) return null;\r\n    if (!results[2]) return '';\r\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\r\n}\r\n\r\nexport const htmlToText = (html) => {\r\n    var temp = document.createElement(\"div\");\r\n    temp.innerHTML = html;\r\n    return temp.textContent || temp.innerText || \"\";\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}