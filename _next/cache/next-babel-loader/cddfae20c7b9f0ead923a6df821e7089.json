{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(getUserProfile),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(getUserByUsernameSaga),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(joinCommunitySaga),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime.mark(leaveCommunitySaga),\n    _marked5 = /*#__PURE__*/_regeneratorRuntime.mark(sendSuggestSaga),\n    _marked6 = /*#__PURE__*/_regeneratorRuntime.mark(Saga);\n\nimport { Get, Post, Delete } from \"../services\";\nimport { call, put, takeLatest } from \"redux-saga/effects\";\nimport { GET_PROFILE_FAILURE, GET_PROFILE_REQUEST, GET_PROFILE_SUCCESS, JOIN_COMMUNITY_REQUEST, JOIN_COMMUNITY_FAILURE, JOIN_COMMUNITY_SUCCESS, GET_USER_BY_USERNAME_FAILURE, GET_USER_BY_USERNAME_REQUEST, GET_USER_BY_USERNAME_SUCCESS, LEAVE_COMMUNITY_SUCCESS, LEAVE_COMMUNITY_FAILURE, LEAVE_COMMUNITY_REQUEST, SEND_SUGGEST_SUCCESS, SEND_SUGGEST_FAILURE, SEND_SUGGEST_REQUEST } from './actions';\nimport { readLocalStorage } from '../helpers';\nimport { getCommunityRequest } from \"../community/actions\";\nimport { LOADER_START, LOADER_END } from \"../loader/actions\";\nimport { toast } from \"react-toastify\";\n\nfunction getUserProfile(_ref) {\n  var payload, user, response;\n  return _regeneratorRuntime.wrap(function getUserProfile$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          payload = _ref.payload;\n          _context.prev = 1;\n          _context.next = 4;\n          return put({\n            type: LOADER_START\n          });\n\n        case 4:\n          user = readLocalStorage(\"user\");\n          _context.next = 7;\n          return call(Get, \"user/get-user/by-id?id=\".concat(user.id), {}, {}, false);\n\n        case 7:\n          response = _context.sent;\n\n          if (!(response && !response.error)) {\n            _context.next = 15;\n            break;\n          }\n\n          _context.next = 11;\n          return put({\n            type: GET_PROFILE_SUCCESS,\n            payload: response\n          });\n\n        case 11:\n          _context.next = 13;\n          return put({\n            type: LOADER_END\n          });\n\n        case 13:\n          _context.next = 19;\n          break;\n\n        case 15:\n          _context.next = 17;\n          return put({\n            type: GET_PROFILE_FAILURE,\n            payload: response\n          });\n\n        case 17:\n          _context.next = 19;\n          return put({\n            type: LOADER_END\n          });\n\n        case 19:\n          _context.next = 27;\n          break;\n\n        case 21:\n          _context.prev = 21;\n          _context.t0 = _context[\"catch\"](1);\n          _context.next = 25;\n          return put({\n            type: GET_PROFILE_FAILURE,\n            payload: _context.t0\n          });\n\n        case 25:\n          _context.next = 27;\n          return put({\n            type: LOADER_END\n          });\n\n        case 27:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[1, 21]]);\n}\n\nfunction getUserByUsernameSaga(username) {\n  var response;\n  return _regeneratorRuntime.wrap(function getUserByUsernameSaga$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return put({\n            type: LOADER_START\n          });\n\n        case 3:\n          _context2.next = 5;\n          return call(Get, \"user/get?username=\".concat(username.username), {}, {}, false);\n\n        case 5:\n          response = _context2.sent;\n\n          if (!(response && !response.error)) {\n            _context2.next = 13;\n            break;\n          }\n\n          _context2.next = 9;\n          return put({\n            type: GET_USER_BY_USERNAME_SUCCESS,\n            payload: response\n          });\n\n        case 9:\n          _context2.next = 11;\n          return put({\n            type: LOADER_END\n          });\n\n        case 11:\n          _context2.next = 17;\n          break;\n\n        case 13:\n          _context2.next = 15;\n          return put({\n            type: GET_USER_BY_USERNAME_FAILURE,\n            payload: response\n          });\n\n        case 15:\n          _context2.next = 17;\n          return put({\n            type: LOADER_END\n          });\n\n        case 17:\n          _context2.next = 25;\n          break;\n\n        case 19:\n          _context2.prev = 19;\n          _context2.t0 = _context2[\"catch\"](0);\n          _context2.next = 23;\n          return put({\n            type: GET_USER_BY_USERNAME_FAILURE,\n            payload: _context2.t0\n          });\n\n        case 23:\n          _context2.next = 25;\n          return put({\n            type: LOADER_END\n          });\n\n        case 25:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, null, [[0, 19]]);\n}\n\nfunction joinCommunitySaga(_ref2) {\n  var payload, response;\n  return _regeneratorRuntime.wrap(function joinCommunitySaga$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          payload = _ref2.payload;\n          _context3.prev = 1;\n          _context3.next = 4;\n          return call(Post, \"user/join-community?slug=\".concat(payload.slug), {}, {}, false);\n\n        case 4:\n          response = _context3.sent;\n\n          if (!(response && !response.error)) {\n            _context3.next = 10;\n            break;\n          }\n\n          _context3.next = 8;\n          return put({\n            type: JOIN_COMMUNITY_SUCCESS,\n            payload: response\n          });\n\n        case 8:\n          _context3.next = 12;\n          break;\n\n        case 10:\n          _context3.next = 12;\n          return put({\n            type: JOIN_COMMUNITY_FAILURE,\n            payload: response\n          });\n\n        case 12:\n          _context3.next = 18;\n          break;\n\n        case 14:\n          _context3.prev = 14;\n          _context3.t0 = _context3[\"catch\"](1);\n          _context3.next = 18;\n          return put({\n            type: JOIN_COMMUNITY_FAILURE,\n            payload: _context3.t0\n          });\n\n        case 18:\n          _context3.next = 20;\n          return put(getCommunityRequest({\n            slug: payload.slug\n          }));\n\n        case 20:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, null, [[1, 14]]);\n}\n\nfunction leaveCommunitySaga(_ref3) {\n  var payload, userId, response;\n  return _regeneratorRuntime.wrap(function leaveCommunitySaga$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          payload = _ref3.payload;\n          _context4.prev = 1;\n          userId = readLocalStorage('user').id;\n          _context4.next = 5;\n          return call(Delete, \"user/leave-from-community?slug=\".concat(payload.slug), {}, {}, false);\n\n        case 5:\n          response = _context4.sent;\n\n          if (!(response && !response.error)) {\n            _context4.next = 11;\n            break;\n          }\n\n          _context4.next = 9;\n          return put({\n            type: LEAVE_COMMUNITY_SUCCESS,\n            payload: response\n          });\n\n        case 9:\n          _context4.next = 13;\n          break;\n\n        case 11:\n          _context4.next = 13;\n          return put({\n            type: LEAVE_COMMUNITY_FAILURE,\n            payload: response\n          });\n\n        case 13:\n          _context4.next = 19;\n          break;\n\n        case 15:\n          _context4.prev = 15;\n          _context4.t0 = _context4[\"catch\"](1);\n          _context4.next = 19;\n          return put({\n            type: LEAVE_COMMUNITY_FAILURE,\n            payload: _context4.t0\n          });\n\n        case 19:\n          _context4.next = 21;\n          return put(getCommunityRequest({\n            slug: payload.slug\n          }));\n\n        case 21:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4, null, [[1, 15]]);\n}\n\nfunction sendSuggestSaga(_ref4) {\n  var payload, response;\n  return _regeneratorRuntime.wrap(function sendSuggestSaga$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          payload = _ref4.payload;\n          _context5.prev = 1;\n          _context5.next = 4;\n          return call(Post, \"user/suggestion\", payload, {}, false);\n\n        case 4:\n          response = _context5.sent;\n\n          if (!(response && !response.error)) {\n            _context5.next = 11;\n            break;\n          }\n\n          _context5.next = 8;\n          return put({\n            type: SEND_SUGGEST_SUCCESS,\n            payload: response\n          });\n\n        case 8:\n          toast.success('Teşekkürler.Önerini inceleyeceğiz');\n          _context5.next = 13;\n          break;\n\n        case 11:\n          _context5.next = 13;\n          return put({\n            type: SEND_SUGGEST_FAILURE,\n            payload: response\n          });\n\n        case 13:\n          _context5.next = 19;\n          break;\n\n        case 15:\n          _context5.prev = 15;\n          _context5.t0 = _context5[\"catch\"](1);\n          _context5.next = 19;\n          return put({\n            type: SEND_SUGGEST_FAILURE,\n            payload: _context5.t0\n          });\n\n        case 19:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5, null, [[1, 15]]);\n}\n\nexport default function Saga() {\n  return _regeneratorRuntime.wrap(function Saga$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return takeLatest(GET_PROFILE_REQUEST, getUserProfile);\n\n        case 2:\n          _context6.next = 4;\n          return takeLatest(GET_USER_BY_USERNAME_REQUEST, getUserByUsernameSaga);\n\n        case 4:\n          _context6.next = 6;\n          return takeLatest(JOIN_COMMUNITY_REQUEST, joinCommunitySaga);\n\n        case 6:\n          _context6.next = 8;\n          return takeLatest(LEAVE_COMMUNITY_REQUEST, leaveCommunitySaga);\n\n        case 8:\n          _context6.next = 10;\n          return takeLatest(SEND_SUGGEST_REQUEST, sendSuggestSaga);\n\n        case 10:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6);\n}\n_c = Saga;\n\nvar _c;\n\n$RefreshReg$(_c, \"Saga\");","map":{"version":3,"sources":["D:/repos/saalla-next.js/lib/users/sagas.js"],"names":["getUserProfile","getUserByUsernameSaga","joinCommunitySaga","leaveCommunitySaga","sendSuggestSaga","Saga","Get","Post","Delete","call","put","takeLatest","GET_PROFILE_FAILURE","GET_PROFILE_REQUEST","GET_PROFILE_SUCCESS","JOIN_COMMUNITY_REQUEST","JOIN_COMMUNITY_FAILURE","JOIN_COMMUNITY_SUCCESS","GET_USER_BY_USERNAME_FAILURE","GET_USER_BY_USERNAME_REQUEST","GET_USER_BY_USERNAME_SUCCESS","LEAVE_COMMUNITY_SUCCESS","LEAVE_COMMUNITY_FAILURE","LEAVE_COMMUNITY_REQUEST","SEND_SUGGEST_SUCCESS","SEND_SUGGEST_FAILURE","SEND_SUGGEST_REQUEST","readLocalStorage","getCommunityRequest","LOADER_START","LOADER_END","toast","payload","type","user","id","response","error","username","slug","userId","success"],"mappings":"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","sourcesContent":["import { Get, Post, Delete } from \"../services\";\r\nimport { call, put, takeLatest } from \"redux-saga/effects\";\r\nimport {\r\n  GET_PROFILE_FAILURE, GET_PROFILE_REQUEST, GET_PROFILE_SUCCESS, JOIN_COMMUNITY_REQUEST, JOIN_COMMUNITY_FAILURE, JOIN_COMMUNITY_SUCCESS,\r\n  GET_USER_BY_USERNAME_FAILURE, GET_USER_BY_USERNAME_REQUEST, GET_USER_BY_USERNAME_SUCCESS, LEAVE_COMMUNITY_SUCCESS, LEAVE_COMMUNITY_FAILURE, LEAVE_COMMUNITY_REQUEST, SEND_SUGGEST_SUCCESS, SEND_SUGGEST_FAILURE, SEND_SUGGEST_REQUEST\r\n} from './actions';\r\nimport { readLocalStorage } from '../helpers';\r\nimport { getCommunityRequest } from \"../community/actions\";\r\nimport { LOADER_START, LOADER_END } from \"../loader/actions\";\r\nimport { toast } from \"react-toastify\";\r\n\r\n\r\nfunction* getUserProfile({ payload }) {\r\n  try {\r\n    yield put({ type: LOADER_START });\r\n    const user = readLocalStorage(\"user\");\r\n    const response = yield call(Get, `user/get-user/by-id?id=${user.id}`, {}, {}, false);\r\n    if (response && !response.error) {\r\n      yield put({ type: GET_PROFILE_SUCCESS, payload: response });\r\n      yield put({ type: LOADER_END });\r\n    } else {\r\n      yield put({ type: GET_PROFILE_FAILURE, payload: response });\r\n      yield put({ type: LOADER_END });\r\n    }\r\n  } catch (error) {\r\n    yield put({ type: GET_PROFILE_FAILURE, payload: error });\r\n    yield put({ type: LOADER_END });\r\n  }\r\n}\r\n\r\nfunction* getUserByUsernameSaga(username) {\r\n  try {\r\n    yield put({ type: LOADER_START });\r\n    const response = yield call(Get, `user/get?username=${username.username}`, {}, {}, false);\r\n    if (response && !response.error) {\r\n      yield put({ type: GET_USER_BY_USERNAME_SUCCESS, payload: response });\r\n      yield put({ type: LOADER_END });\r\n    } else {\r\n      yield put({ type: GET_USER_BY_USERNAME_FAILURE, payload: response });\r\n      yield put({ type: LOADER_END });\r\n    }\r\n  } catch (error) {\r\n    yield put({ type: GET_USER_BY_USERNAME_FAILURE, payload: error });\r\n    yield put({ type: LOADER_END });\r\n  }\r\n}\r\n\r\nfunction* joinCommunitySaga({ payload }) {\r\n  try {\r\n    const response = yield call(Post, `user/join-community?slug=${payload.slug}`, {}, {}, false);\r\n    if (response && !response.error) {\r\n      yield put({ type: JOIN_COMMUNITY_SUCCESS, payload: response });\r\n    } else {\r\n      yield put({ type: JOIN_COMMUNITY_FAILURE, payload: response });\r\n    }\r\n  } catch (error) {\r\n    yield put({ type: JOIN_COMMUNITY_FAILURE, payload: error });\r\n  }\r\n  yield put(getCommunityRequest({ slug: payload.slug }));\r\n}\r\n\r\nfunction* leaveCommunitySaga({ payload }) {\r\n  try {\r\n    const userId = readLocalStorage('user').id\r\n    const response = yield call(Delete, `user/leave-from-community?slug=${payload.slug}`, {}, {}, false);\r\n    if (response && !response.error) {\r\n      yield put({ type: LEAVE_COMMUNITY_SUCCESS, payload: response });\r\n    } else {\r\n      yield put({ type: LEAVE_COMMUNITY_FAILURE, payload: response });\r\n    }\r\n  } catch (error) {\r\n    yield put({ type: LEAVE_COMMUNITY_FAILURE, payload: error });\r\n  }\r\n  yield put(getCommunityRequest({ slug: payload.slug }));\r\n}\r\n\r\nfunction* sendSuggestSaga({ payload }) {\r\n  try {\r\n    const response = yield call(Post, `user/suggestion`, payload, {}, false);\r\n    if (response && !response.error) {\r\n      yield put({ type: SEND_SUGGEST_SUCCESS, payload: response });\r\n      toast.success('Teşekkürler.Önerini inceleyeceğiz')\r\n    } else {\r\n      yield put({ type: SEND_SUGGEST_FAILURE, payload: response });\r\n    }\r\n  } catch (error) {\r\n    yield put({ type: SEND_SUGGEST_FAILURE, payload: error });\r\n  }\r\n}\r\n\r\n\r\nexport default function* Saga() {\r\n  yield takeLatest(GET_PROFILE_REQUEST, getUserProfile);\r\n  yield takeLatest(GET_USER_BY_USERNAME_REQUEST, getUserByUsernameSaga);\r\n  yield takeLatest(JOIN_COMMUNITY_REQUEST, joinCommunitySaga);\r\n  yield takeLatest(LEAVE_COMMUNITY_REQUEST, leaveCommunitySaga);\r\n  yield takeLatest(SEND_SUGGEST_REQUEST, sendSuggestSaga);\r\n\r\n}"]},"metadata":{},"sourceType":"module"}